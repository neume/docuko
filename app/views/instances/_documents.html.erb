<div class="card">
  <div class="card-body">
    <div class="row mb-2">
    <% if @data_model.templates.count.zero? %>
      <div class="col-12">
        <div class='alert alert-warning' %>
          This Data model does not have any document templates.
          <% if current_membership.admin? %>
            <%= link_to 'Add document template', [:new, current_office, instance.data_model, :template], remote: true %>
          <% end %>
        </div>
      </div>
    <% end %>
      <div class="col-sm-5">
        <%= link_to [:new, current_office, instance, :document], class: 'btn btn-info  btn-sm', remote: true do %>
          <i class="fa fa-circle-plus me-1"></i> Generate
        <% end %>
      </div>
    </div>
    <table class='table table-striped table-borderless table-hover'>
      <thead>
        <tr>
          <th>Name</th>
          <th>Template</th>
          <th>Created at</th>
          <th>Created by</th>
          <th class='tb-actions'>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% documents.each do |document| %>
          <tr>
            <td>
              <%= document.name  %>
            </td>
            <td>
              <%= document.template.name  %>
            </td>
            <td>
              <%= document.created_at.strftime('%-d/%m/%Y %r') %>
            </td>
            <td>
              <%= document.created_by.email %>
            </td>
            <td class='tb-actions'>

              <% if document.file.present? %>
                <%= link_to rails_blob_path(document.file, disposition: "attachment") do %>
                  Download
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
